<%- model_class = Item -%>
<section class="content">
  <div class="row">
    <div class="col-xs-12">
      <div class="box">
        <div class="box-header">
          <h3 class="box-title">
            <%= t '.title', :default => model_class.model_name.human.pluralize.titleize %>
            <%= link_to 'New Item',
                        new_admin_item_path,
                        :class => 'btn btn-sm btn-success' %>
          </h3>
        </div>
        <!-- /.box-header -->
        <div class="box-body">
          <table id="example1" class="table table-bordered table-striped">
            <thead>
            <tr>
              <th><%= model_class.human_attribute_name(:id) %></th>
              <th><%= model_class.human_attribute_name(:image) %></th>
              <th><%= model_class.human_attribute_name(:name) %></th>
              <th><%= model_class.human_attribute_name(:description) %></th>
              <th><%= model_class.human_attribute_name(:quantity) %></th>
              <th><%= model_class.human_attribute_name(:status) %></th>
              <th><%= t '.actions', :default => t('helpers.actions') %></th>
            </tr>
            </thead>
            <tbody>
            <% if @items.count > 0 %>
                <% @items.each do |item| %>
                    <tr>
                      <td><%= link_to item.id, admin_item_path(item) %></td>
                      <td><%= image_tag item.image.present? ? item.image_url(:thumb) : 'http://placehold.it/200x200', alt: "#{item.name}" %></td>
                      <td><%= item.name %></td>
                      <td><%= truncate(item.description, length: 100) %></td>
                      <td><%= item.quantity %></td>
                      <td><%= item.status %></td>
                      <td>
                        <%= link_to t('.show', :default => t('helpers.links.show')),
                                    admin_item_path(item), :class => 'btn btn-sm btn-default' %>
                        <%= link_to t('.edit', :default => t('helpers.links.edit')),
                                    edit_admin_item_path(item), :class => 'btn btn-sm btn-warning' %>
                        <%= link_to t('.destroy', :default => t('helpers.links.destroy')),
                                    admin_item_path(item),
                                    :method => :delete,
                                    :data => {:confirm => t('.confirm', :default => t('helpers.links.confirm', :default => 'Are you sure?'))},
                                    :class => 'btn btn-sm btn-danger' %>
                      </td>
                    </tr>
                <% end %>
            <% else %>
                <tr>
                  <td colspan="7" class="text-center">
                    No items found
                  </td>
                </tr>
            <% end %>
            </tbody>

          </table>
        </div>
        <!-- /.box-body -->
      </div>
    </div>
  </div>
</section>

<script>
  $(document).ready(function () {
    $("#example1").DataTable();
    $('#example2').DataTable({
      "paging": true,
      "lengthChange": false,
      "searching": false,
      "ordering": true,
      "info": true,
      "autoWidth": false
    });

  })
</script>